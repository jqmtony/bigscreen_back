<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<#include "/frame/pageInclude.html">
<script type="text/javascript">
 var lookup_Win;
 $(document).ready(function() {
	grid = $('#tab').datagrid({
		//title : '角色列表',			
		url : '${base}/role/queryList',
		queryParams : $("#queryForm").serializeObject(),
		pagination : true,
		rownumbers : true,
		singleSelect : true,
		striped : true,
		fit : true,
		toolbar : '#toolbar',
		fitColumns : true,
		onDblClickRow : function(index, row) {
			modifyRow(row);
		}
	});
 });
 
 function formatOper(val,row){ 
	var operateStr ='<a href="javascript:void(0);" onclick="selectUser('+row.id+')">分配用户</a>&nbsp;'+
                    '<a href="javascript:void(0);" onclick="selectResource('+row.id+')">分配资源</a>&nbsp;'
    return operateStr;
 }
 
 
 function selectUser(roleId){
	 lookup_Win = $("#lookup-user-window").dialogFrameWindow();
	 lookup_Win.dialogFrameHtml('gotoSelectedUserByRoleId?roleId='+roleId);
 }
 
 
 function closeWin(){
	 lookup_Win.window('close');
 }
 
 function selectResource(roleId){
	 lookup_Win = $("#lookup-resource-window").dialogFrameWindow();
	 lookup_Win.dialogFrameHtml('gotoSelectedResourceByRoleId?roleId='+roleId);
 }
</script>
</head>
<body>

   <table class="easyui-datagrid" id="tab">
		<thead>
			<tr>
				<th data-options="field:'id',width:100">ID</th>
				<th data-options="field:'roleName',width:150">角色名称</th>
				<th data-options="field:'remark',width:200">备注</th>
				<th data-options="field:'_operate',width:150,formatter:formatOper">操作</th>
			</tr>
		</thead>
	</table>
	
	<div id="toolbar" style="padding:2px 5px;">
		<form id="queryForm">
			角色名称： <input type="text" class="easyui-validatebox textbox" name="roleName" style="width:110px"></input>
			<a href="javascript:void(0);" onclick="query();"class="easyui-linkbutton" iconCls="icon-search">查询</a>
			<a href="javascript:void(0);" onclick="resetQueryForm();" class="easyui-linkbutton" iconCls="icon-remove">清空</a>
		</form>
		<div style="margin:5px">
		    <a href="javascript:void(0);" onclick="add();" class="easyui-linkbutton" data-options="iconCls:'icon-add',toggle:true">新增</a>
			<a href="javascript:void(0);" onclick="modify();" class="easyui-linkbutton" data-options="iconCls:'icon-edit',toggle:true">编辑</a>
			<a href="javascript:void(0);" onclick="removeModule();" class="easyui-linkbutton" data-options="iconCls:'icon-remove',toggle:true">删除</a>
		</div>
	</div>
	
   <#include "./add.html">
   <#include "./update.html">
   <div id="lookup-user-window" title="分配用户"></div>
   <div id="lookup-resource-window" title="分配资源"></div>
</body>
</html>
